<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generator Website Toko Online</title>
    <style>
        :root {
            --primary: #2563eb;
            --danger: #dc2626;
            --success: #059669;
            --bg: #f8fafc;
            --shadow: 0 2px 12px rgba(37, 99, 235, 0.06);
            --card: #ffffff;
            --border: #e5e7eb;
            --radius: 14px;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        html, body { width: 100%; min-height: 100vh; }
        body {
            font-family: -apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;
            background: var(--bg);
            color: #222;
            min-height: 100vh;
        }
        h1, h2, h3, h4 { font-weight: 700; letter-spacing: -.01em; }
        .container {
            max-width: 880px;
            margin: 0 auto;
            padding: 32px 12px 64px 12px;
        }
        header {
            background: var(--primary);
            color: #fff;
            padding: 0;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
        }
        .header-inner {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 880px;
            margin: 0 auto;
            padding: 16px 12px;
        }
        .logo {
            font-size: 1.5rem;
            font-weight: 800;
            letter-spacing: -.01em;
        }
        .header-info {
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .header-info i {
            background: #fff;
            border-radius: 50%;
            color: var(--primary);
            width: 28px;
            height: 28px;
            display: inline-flex;
            justify-content: center;
            align-items: center;
            font-style: normal;
            font-size: 1.3rem;
        }
        .card {
            background: var(--card);
            box-shadow: var(--shadow);
            border-radius: var(--radius);
            padding: 28px 22px 22px 22px;
            margin-bottom: 30px;
        }
        .card-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--primary);
        }
        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px 32px;
        }
        @media (max-width: 850px) {
            .form-grid { grid-template-columns: 1fr; }
        }
        .form-group {
            margin-bottom: 14px;
            display: flex;
            flex-direction: column;
        }
        label {
            font-weight: 600;
            margin-bottom: 6px;
            color: #222;
        }
        input[type="text"], input[type="number"], input[type="tel"], textarea, select {
            padding: 11px 10px;
            border: 1.5px solid var(--border);
            border-radius: 6px;
            font-size: 1rem;
            background: #fff;
            transition: border 0.2s;
        }
        input:focus, textarea:focus, select:focus {
            outline: 2px solid var(--primary);
            border-color: var(--primary);
        }
        textarea {
            min-height: 56px;
            resize: vertical;
        }
        .checkbox-row {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 6px;
            margin-top: 7px;
        }
        .checkbox-row label {
            margin-bottom: 0;
            font-weight: 500;
            color: #222;
        }
        .gen-btn {
            display: block;
            width: 100%;
            font-size: 1.15rem;
            background: var(--primary);
            color: #fff;
            border: none;
            border-radius: 6px;
            padding: 17px 0;
            font-weight: 700;
            margin-top: 18px;
            cursor: pointer;
            box-shadow: 0 2px 10px 0 rgba(37,99,235,.10);
            transition: background .15s;
        }
        .gen-btn:hover { background: #1749b4; }
        .result-section {
            margin-top: 26px;
            display: none;
        }
        .result-label {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--primary);
        }
        .result-actions {
            display: flex;
            gap: 13px;
            margin-bottom: 10px;
        }
        .result-actions button {
            background: var(--success);
            color: #fff;
            border: none;
            border-radius: 6px;
            padding: 9px 17px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: background .15s;
        }
        .result-actions button:hover { background: #047857; }
        .result-actions .download-btn { background: var(--primary); }
        .result-actions .download-btn:hover { background: #1749b4; }
        .result-box {
            width: 100%;
            min-height: 280px;
            border: 1.5px solid var(--border);
            border-radius: 8px;
            padding: 16px 11px;
            background: #f3f8fe;
            font-family: 'Menlo', 'Consolas', monospace;
            font-size: 0.98rem;
            color: #222;
            white-space: pre;
            resize: vertical;
        }
        .footer {
            text-align: center;
            font-size: 14px;
            color: #888;
            margin: 30px 0 18px 0;
        }
        @media (max-width: 600px) {
            .container { padding: 10px 2px 50px 2px; }
            .header-inner { flex-direction: column; gap: 9px; }
            .card { padding: 15px 8px 16px 8px; }
        }
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
        input[type=number] { -moz-appearance: textfield; }
        input[type="checkbox"] {
            accent-color: var(--primary);
            width: 17px; height: 17px;
        }
        .helper-text {
            font-size: 12px;
            color: #6b7280;
            margin-top: 2px;
        }
    </style>
</head>
<body>
    <header>
        <div class="header-inner">
            <div class="logo">üõçÔ∏è Generator Website Toko Online</div>
            <div class="header-info">
                <i>üì±</i>
                <span>
                    Powered by <b style="color: #fff;">nexcoAI</b>
                </span>
            </div>
        </div>
    </header>
    <div class="container">
        <form id="generatorForm" autocomplete="off">
            <div class="card">
                <div class="card-title">1. Informasi Produk</div>
                <div class="form-grid">
                    <div>
                        <div class="form-group">
                            <label for="productName">Nama Produk</label>
                            <input type="text" id="productName" required placeholder="Contoh: Jaket Premium Casual">
                        </div>
                        <div class="form-group">
                            <label for="price">Harga (Rp)</label>
                            <input type="number" id="price" required min="1" step="1" placeholder="Contoh: 185000">
                        </div>
                        <div class="form-group">
                            <label for="description">Deskripsi</label>
                            <textarea id="description" required placeholder="Tulis deskripsi produk..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="whatsapp">No. WhatsApp Toko</label>
                            <input type="text" id="whatsapp" required placeholder="6281234567890">
                            <span class="helper-text">Format: 628xxxx (diawali 62, tanpa + atau 0)</span>
                        </div>
                    </div>
                    <div>
                        <div class="form-group">
                            <label for="storeName">Nama Toko</label>
                            <input type="text" id="storeName" required placeholder="Contoh: Fashion Store">
                        </div>
                        <div class="form-group">
                            <label for="storePhone">No. Telepon Toko (opsional)</label>
                            <input type="text" id="storePhone" placeholder="Contoh: 021-123456">
                        </div>
                        <div class="form-group">
                            <label for="features">Fitur Produk (dipisah koma)</label>
                            <textarea id="features" placeholder="Contoh: Bahan Premium, Kualitas Terjamin, Unisex"></textarea>
                            <span class="helper-text">Contoh: "Bahan Premium, Unisex, Garansi 7 Hari"</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="card-title">2. Gambar Produk & GIF</div>
                <div class="form-group">
                    <label for="productImages">URL Gambar Produk (1 baris 1 gambar, atau dipisah koma)</label>
                    <textarea id="productImages" required placeholder="https://...jpg&#10;https://...jpg"></textarea>
                    <span class="helper-text">Paste satu atau banyak link gambar produk (wajib minimal 1, boleh sebanyak apapun)</span>
                </div>
                <div class="form-group">
                    <label for="productGif">URL GIF Produk (opsional)</label>
                    <input type="text" id="productGif" placeholder="https://...gif">
                    <span class="helper-text">Jika diisi, GIF akan muncul di galeri gambar</span>
                </div>
            </div>
            <div class="card">
                <div class="card-title">3. Varian Produk</div>
                <div class="form-grid">
                    <div>
                        <div class="checkbox-row">
                            <input type="checkbox" id="hasVariants">
                            <label for="hasVariants">Produk punya varian warna/ukuran?</label>
                        </div>
                        <div class="form-group">
                            <label for="colors">Warna (dipisah koma)</label>
                            <input type="text" id="colors" placeholder="Contoh: Brown, Black, Navy">
                            <span class="helper-text">Biarkan kosong jika tidak ada</span>
                        </div>
                        <div class="form-group">
                            <label for="sizes">Ukuran (dipisah koma)</label>
                            <input type="text" id="sizes" placeholder="Contoh: S, M, L, XL, XXL">
                            <span class="helper-text">Biarkan kosong jika tidak ada</span>
                        </div>
                    </div>
                    <div>
                        <div class="checkbox-row">
                            <input type="checkbox" id="autoGenerateCombinations">
                            <label for="autoGenerateCombinations">Buat kombinasi otomatis (Warna-Ukuran)</label>
                        </div>
                        <div class="form-group">
                            <label for="manualVariantList">List Varian Manual (satu per baris)</label>
                            <textarea id="manualVariantList" placeholder="Contoh: BROWN-S&#10;BROWN-M&#10;BLACK-L"></textarea>
                            <span class="helper-text">Diisi jika ingin varian khusus/manual</span>
                        </div>
                    </div>
                </div>
            </div>
            <div style="text-align: right;">
                <button type="button" class="gen-btn" id="generateBtn">Generate Website</button>
            </div>
        </form>
        <div class="result-section" id="resultSection">
            <div class="result-label">Hasil HTML Website Toko Online</div>
            <div class="result-actions">
                <button id="copyBtn">Salin HTML</button>
                <button class="download-btn" id="downloadBtn">Download HTML</button>
            </div>
            <textarea class="result-box" id="result" readonly spellcheck="false"></textarea>
            <div class="helper-text" style="margin-top:10px;">Upload file HTML ke hosting atau buka langsung di browser untuk uji coba.</div>
        </div>
        <div class="footer">
            &copy; 2025 <b>nexcoAI</b> ¬∑ Generator Website Toko Online | Simple. Clean. Powerful.
        </div>
    </div>
    <script>
        // Data lengkap wilayah Indonesia dengan estimasi ongkir
        const indonesiaData = {
            "Aceh": {
                "Banda Aceh": ["Baiturrahman", "Banda Raya", "Jaya Baru", "Kuta Alam", "Kuta Raja", "Lueng Bata", "Meuraxa", "Syiah Kuala", "Ulee Kareng"],
                "Sabang": ["Sabang", "Sukakarya"],
                "Lhokseumawe": ["Banda Sakti", "Blang Mangat", "Muara Dua", "Muara Satu"],
                "Langsa": ["Langsa Barat", "Langsa Baro", "Langsa Kota", "Langsa Lama", "Langsa Timur"],
                "Meulaboh": ["Johan Pahlawan", "Meureubo"],
                "Calang": ["Jaya", "Lhoknga", "Peukan Bada", "Pulo Aceh", "Teunom"],
                "Sigli": ["Baktiya", "Baktiya Barat", "Delima", "Geumpang", "Indrajaya", "Kembang Tanjong", "Kota Sigli", "Mane", "Mila", "Mutiara", "Mutiara Timur", "Padang Tiji", "Peukan Baro", "Pidie", "Sakti", "Simpang Tiga", "Tangse", "Tiro", "Titeue"],
                "Takengon": ["Atu Lintang", "Bener Kelipah", "Bies", "Bukit", "Celala", "Kebayakan", "Ketol", "Kute Panang", "Linge", "Lut Tawar", "Pegasing", "Rusip Antara", "Silih Nara"]
            },
            "Sumatera Utara": {
                "Medan": ["Medan Amplas", "Medan Area", "Medan Barat", "Medan Belawan", "Medan Baru", "Medan Deli", "Medan Denai", "Medan Helvetia", "Medan Johor", "Medan Kota", "Medan Labuhan", "Medan Marelan", "Medan Maimun", "Medan Perjuangan", "Medan Petisah", "Medan Polonia", "Medan Selayang", "Medan Sunggal", "Medan Tembung", "Medan Timur", "Medan Tuntungan"],
                "Binjai": ["Binjai Barat", "Binjai Kota", "Binjai Selatan", "Binjai Timur", "Binjai Utara"],
                "Tebing Tinggi": ["Bajenis", "Padang Hilir", "Padang Hulu", "Rambutan", "Tebing Tinggi Kota"],
                "Pematangsiantar": ["Siantar Barat", "Siantar Martoba", "Siantar Selatan", "Siantar Sitalasari", "Siantar Timur", "Siantar Utara"],
                "Tanjungbalai": ["Datuk Bandar", "Datuk Bandar Timur", "Sei Tualang Raso", "Tanjungbalai Selatan", "Tanjungbalai Utara"],
                "Sibolga": ["Sibolga Kota", "Sibolga Sambas", "Sibolga Utara"],
                "Gunungsitoli": ["Gunungsitoli", "Gunungsitoli Alooa", "Gunungsitoli Barat", "Gunungsitoli Idanoi", "Gunungsitoli Selatan", "Gunungsitoli Utara"],
                "Padangsidimpuan": ["Hutaimbaru", "Padangsidimpuan Angkola Julu", "Padangsidimpuan Batunadua", "Padangsidimpuan Hutaimbaru", "Padangsidimpuan Selatan", "Padangsidimpuan Tenggara", "Padangsidimpuan Utara"]
            },
            "Sumatera Barat": {
                "Padang": ["Bungus Teluk Kabung", "Koto Tangah", "Kuranji", "Lubuk Begalung", "Lubuk Kilangan", "Nanggalo", "Padang Barat", "Padang Selatan", "Padang Timur", "Padang Utara", "Pauh"],
                "Bukittinggi": ["Aur Birugo Tigo Baleh", "Guguk Panjang", "Mandiangin Koto Selayan"],
                "Padangpanjang": ["Padang Panjang Barat", "Padang Panjang Timur"],
                "Payakumbuh": ["Lamposi Tigo Nagari", "Payakumbuh Barat", "Payakumbuh Selatan", "Payakumbuh Timur", "Payakumbuh Utara"],
                "Solok": ["Lubuk Sikarah", "Tanjung Harapan"],
                "Sawahlunto": ["Barangin", "Lembah Segar", "Silungkang", "Talawi"],
                "Pariaman": ["Pariaman Selatan", "Pariaman Tengah", "Pariaman Timur", "Pariaman Utara"]
            },
            "Riau": {
                "Pekanbaru": ["Bukit Raya", "Lima Puluh", "Marpoyan Damai", "Payung Sekaki", "Pekanbaru Kota", "Rumbai", "Rumbai Pesisir", "Sail", "Senapelan", "Sukajadi", "Tampan", "Tenayan Raya"],
                "Dumai": ["Bukit Kapur", "Dumai Barat", "Dumai Kota", "Dumai Selatan", "Dumai Timur", "Medang Kampai", "Sungai Sembilan"],
                "Batam": ["Batam Kota", "Batu Aji", "Batu Ampar", "Belakang Padang", "Bengkong", "Bulang", "Galang", "Lubuk Baja", "Nongsa", "Sagulung", "Sei Beduk", "Sekupang"]
            },
            "Kepulauan Riau": {
                "Tanjungpinang": ["Bukit Bestari", "Tanjungpinang Barat", "Tanjungpinang Kota", "Tanjungpinang Timur"],
                "Batam": ["Batam Kota", "Batu Aji", "Batu Ampar", "Belakang Padang", "Bengkong", "Bulang", "Galang", "Lubuk Baja", "Nongsa", "Sagulung", "Sei Beduk", "Sekupang"]
            },
            "Jambi": {
                "Jambi": ["Danau Sipin", "Danau Teluk", "Jelutung", "Kota Baru", "Muaro Jambi", "Pasar Jambi", "Pelayangan", "Telanaipura", "Thehok"],
                "Sungai Penuh": ["Hamparan Rawang", "Kumun Debai", "Pesisir Bukit", "Pondok Tinggi", "Sungai Bungkal", "Sungai Penuh", "Tanah Kampung", "Tes"]
            },
            "Sumatera Selatan": {
                "Palembang": ["Alang-Alang Lebar", "Bukit Kecil", "Gandus", "Ilir Barat I", "Ilir Barat II", "Ilir Timur I", "Ilir Timur II", "Ilir Timur III", "Jakabaring", "Kalidoni", "Kemuning", "Kertapati", "Plaju", "Sako", "Seberang Ulu I", "Seberang Ulu II", "Sukarami"],
                "Prabumulih": ["Cambai", "Prabumulih Barat", "Prabumulih Selatan", "Prabumulih Timur", "Prabumulih Utara", "Rambang Kapak Tengah"],
                "Pagar Alam": ["Dempo Selatan", "Dempo Tengah", "Dempo Utara", "Pagar Alam Selatan", "Pagar Alam Utara"],
                "Lubuk Linggau": ["Lubuklinggau Barat I", "Lubuklinggau Barat II", "Lubuklinggau Selatan I", "Lubuklinggau Selatan II", "Lubuklinggau Timur I", "Lubuklinggau Timur II", "Lubuklinggau Utara I", "Lubuklinggau Utara II"]
            },
            "Bengkulu": {
                "Bengkulu": ["Gading Cempaka", "Kampung Melayu", "Muara Bangka Hulu", "Ratu Agung", "Ratu Samban", "Selebar", "Singaran Pati", "Teluk Segara", "Teluk Segara"]
            },
            "Lampung": {
                "Bandar Lampung": ["Bumi Waras", "Enggal", "Kedamaian", "Kedaton", "Kemiling", "Langkapura", "Panjang", "Rajabasa", "Sukabumi", "Sukarame", "Tanjung Karang Barat", "Tanjung Karang Pusat", "Tanjung Karang Timur", "Tanjung Senang", "Teluk Betung Barat", "Teluk Betung Selatan", "Teluk Betung Timur", "Teluk Betung Utara", "Way Halim"],
                "Metro": ["Metro Barat", "Metro Pusat", "Metro Selatan", "Metro Timur", "Metro Utara"]
            },
            "Bangka Belitung": {
                "Pangkalpinang": ["Bukitintan", "Gabek", "Gerunggang", "Pangkalbalam", "Rangkui", "Taman Sari"],
                "Sungai Liat": ["Merawang", "Pemali", "Sungai Liat"]
            },
            "DKI Jakarta": {
                "Jakarta Pusat": ["Cempaka Putih", "Gambir", "Johar Baru", "Kemayoran", "Menteng", "Sawah Besar", "Senen", "Tanah Abang"],
                "Jakarta Utara": ["Cilincing", "Kelapa Gading", "Koja", "Pademangan", "Penjaringan", "Tanjung Priok"],
                "Jakarta Barat": ["Cengkareng", "Grogol Petamburan", "Kalideres", "Kebon Jeruk", "Kembangan", "Palmerah", "Taman Sari", "Tambora"],
                "Jakarta Selatan": ["Cilandak", "Jagakarsa", "Kebayoran Baru", "Kebayoran Lama", "Mampang Prapatan", "Pancoran", "Pasar Minggu", "Pesanggrahan", "Setiabudi", "Tebet"],
                "Jakarta Timur": ["Cakung", "Cipayung", "Ciracas", "Duren Sawit", "Jatinegara", "Kramat Jati", "Makasar", "Matraman", "Pasar Rebo", "Pulogadung"],
                "Kepulauan Seribu": ["Kepulauan Seribu Selatan", "Kepulauan Seribu Utara"]
            },
            "Jawa Barat": {
                "Bandung": ["Andir", "Antapani", "Arcamanik", "Astana Anyar", "Babakan Ciparay", "Bandung Kidul", "Bandung Kulon", "Bandung Wetan", "Batununggal", "Bojongloa Kaler", "Bojongloa Kidul", "Buahbatu", "Cicendo", "Cidadap", "Cinambo", "Coblong", "Gedebage", "Kiaracondong", "Lengkong", "Mandalajati", "Panyileukan", "Rancasari", "Regol", "Sukajadi", "Sukasari", "Sumur Bandung", "Ujung Berung"],
                "Bekasi": ["Bantargebang", "Bekasi Barat", "Bekasi Selatan", "Bekasi Timur", "Bekasi Utara", "Jatiasih", "Jatisampurna", "Medan Satria", "Mustika Jaya", "Pondok Gede", "Pondok Melati", "Rawalumbu"],
                "Bogor": ["Bogor Barat", "Bogor Selatan", "Bogor Tengah", "Bogor Timur", "Bogor Utara", "Tanah Sareal"],
                "Depok": ["Beji", "Bojongsari", "Cilodong", "Cimanggis", "Cinere", "Cipayung", "Limo", "Pancoran Mas", "Sawangan", "Sukmajaya", "Tapos"],
                "Cimahi": ["Cimahi Selatan", "Cimahi Tengah", "Cimahi Utara"],
                "Tasikmalaya": ["Bungursari", "Cibeureum", "Cihideung", "Cipedes", "Indihiang", "Kawalu", "Mangkubumi", "Purbaratu", "Tawang", "Tamansari"],
                "Banjar": ["Banjar", "Langensari", "Pataruman", "Purwaharja"],
                "Cirebon": ["Harjamukti", "Kejaksan", "Kesambi", "Lemahwungkuk", "Pekalipan"]
            },
            "Jawa Tengah": {
                "Semarang": ["Banyumanik", "Candisari", "Gajahmungkur", "Gayamsari", "Genuk", "Gunungpati", "Ngaliyan", "Pedurungan", "Semarang Barat", "Semarang Selatan", "Semarang Tengah", "Semarang Timur", "Semarang Utara", "Tembalang", "Tugu"],
                "Surakarta": ["Banjarsari", "Jebres", "Laweyan", "Pasar Kliwon", "Serengan"],
                "Salatiga": ["Argomulyo", "Sidorejo", "Sidomukti", "Tingkir"],
                "Magelang": ["Magelang Selatan", "Magelang Tengah", "Magelang Utara"],
                "Pekalongan": ["Pekalongan Barat", "Pekalongan Selatan", "Pekalongan Timur", "Pekalongan Utara"],
                "Tegal": ["Margadana", "Tegal Barat", "Tegal Selatan", "Tegal Timur"]
            },
            "DI Yogyakarta": {
                "Yogyakarta": ["Danurejan", "Gedongtengen", "Gondokusuman", "Gondomanan", "Jetis", "Kotagede", "Kraton", "Mantrijeron", "Mergangsan", "Ngampilan", "Pakualaman", "Tegalrejo", "Umbulharjo", "Wirobrajan"]
            },
            "Jawa Timur": {
                "Surabaya": ["Asemrowo", "Benowo", "Bubutan", "Bulak", "Dukuh Pakis", "Gayungan", "Genteng", "Gubeng", "Gununganyar", "Jambangan", "Karang Pilang", "Kenjeran", "Krembangan", "Lakarsantri", "Mulyorejo", "Pabean Cantian", "Pakal", "Rungkut", "Sambikerep", "Sawahan", "Semampir", "Simokerto", "Sukolilo", "Sukomanunggal", "Tambaksari", "Tandes", "Tegalsari", "Tenggilis Mejoyo", "Wiyung", "Wonocolo", "Wonokromo"],
                "Malang": ["Blimbing", "Kedungkandang", "Klojen", "Lowokwaru", "Sukun"],
                "Batu": ["Batu", "Bumiaji", "Junrejo"],
                "Blitar": ["Kepanjenkidul", "Sananwetan", "Sukorejo"],
                "Kediri": ["Kota Kediri", "Mojoroto", "Pesantren"],
                "Mojokerto": ["Magersari", "Prajurit Kulon"],
                "Madiun": ["Kartoharjo", "Mangu Harjo", "Taman"],
                "Pasuruan": ["Bugulkidul", "Gadingrejo", "Panggungrejo", "Purworejo"]
            },
            "Banten": {
                "Serang": ["Curug", "Kasemen", "Serang", "Taktakan", "Walantaka", "Cipocok Jaya"],
                "Tangerang": ["Batuceper", "Benda", "Cibodas", "Ciledug", "Cipondoh", "Jatiuwung", "Karang Tengah", "Karawaci", "Larangan", "Neglasari", "Pinang", "Tangerang", "Periuk"],
                "Tangerang Selatan": ["Ciputat", "Ciputat Timur", "Pamulang", "Pondok Aren", "Serpong", "Serpong Utara", "Setu"],
                "Cilegon": ["Cibeber", "Cilegon", "Citangkil", "Ciwandan", "Gerogol", "Jombang", "Purwakarta", "Pulomerak"]
            },
            "Bali": {
                "Denpasar": ["Denpasar Barat", "Denpasar Selatan", "Denpasar Timur", "Denpasar Utara"]
            },
            "Nusa Tenggara Barat": {
                "Mataram": ["Ampenan", "Cakranegara", "Mataram", "Sandubaya", "Selaparang", "Sekarbela"],
                "Bima": ["Asakota", "Mpunda", "Rasanae Barat", "Rasanae Timur", "Raba"]
            },
            "Nusa Tenggara Timur": {
                "Kupang": ["Alak", "Kelapa Lima", "Kota Lama", "Kota Raja", "Maulafa", "Oebobo"]
            },
            "Kalimantan Barat": {
                "Pontianak": ["Pontianak Barat", "Pontianak Kota", "Pontianak Selatan", "Pontianak Tenggara", "Pontianak Timur", "Pontianak Utara"],
                "Singkawang": ["Singkawang Barat", "Singkawang Selatan", "Singkawang Tengah", "Singkawang Timur", "Singkawang Utara"]
            },
            "Kalimantan Tengah": {
                "Palangka Raya": ["Bukit Batu", "Jekan Raya", "Pahandut", "Rakumpit", "Sabangau"]
            },
            "Kalimantan Selatan": {
                "Banjarmasin": ["Banjarmasin Barat", "Banjarmasin Selatan", "Banjarmasin Tengah", "Banjarmasin Timur", "Banjarmasin Utara"],
                "Banjarbaru": ["Banjarbaru Selatan", "Banjarbaru Utara", "Cempaka", "Landasan Ulin", "Liang Anggang"]
            },
            "Kalimantan Timur": {
                "Samarinda": ["Palaran", "Sambutan", "Samarinda Ilir", "Samarinda Kota", "Samarinda Seberang", "Samarinda Ulu", "Samarinda Utara", "Sungai Kunjang", "Sungai Pinang", "Loa Janan Ilir"],
                "Balikpapan": ["Balikpapan Barat", "Balikpapan Kota", "Balikpapan Selatan", "Balikpapan Tengah", "Balikpapan Timur", "Balikpapan Utara"],
                "Bontang": ["Bontang Barat", "Bontang Selatan", "Bontang Utara"]
            },
            "Kalimantan Utara": {
                "Tarakan": ["Tarakan Barat", "Tarakan Tengah", "Tarakan Timur", "Tarakan Utara"]
            },
            "Sulawesi Utara": {
                "Manado": ["Bunaken", "Malalayang", "Mapanget", "Paal Dua", "Sario", "Singkil", "Tikala", "Tuminting", "Wanea"],
                "Tomohon": ["Tomohon Barat", "Tomohon Selatan", "Tomohon Tengah", "Tomohon Timur", "Tomohon Utara"],
                "Kotamobagu": ["Kotamobagu Barat", "Kotamobagu Selatan", "Kotamobagu Timur", "Kotamobagu Utara"],
                "Bitung": ["Aertembaga", "Girian", "Lembeh Selatan", "Lembeh Utara", "Madidir", "Maesa", "Ranowulu", "Tandurusa"]
            },
            "Sulawesi Tengah": {
                "Palu": ["Palu Barat", "Palu Selatan", "Palu Timur", "Palu Utara", "Tatanga", "Ulujadi", "Mantikulore", "Tawaeli"]
            },
            "Sulawesi Selatan": {
                "Makassar": ["Biringkanaya", "Bontoala", "Makassar", "Mamajang", "Manggala", "Mariso", "Panakkukang", "Rappocini", "Tallo", "Tamalanrea", "Tamalate", "Ujung Pandang", "Ujung Tanah", "Wajo"],
                "Parepare": ["Bacukiki", "Bacukiki Barat", "Soreang", "Ujung"],
                "Palopo": ["Bara", "Mungkajang", "Sendana", "Wara", "Wara Barat", "Wara Selatan", "Wara Timur", "Wara Utara"]
            },
            "Sulawesi Tenggara": {
                "Kendari": ["Abeli", "Baruga", "Kambu", "Kadia", "Kendari", "Kendari Barat", "Mandonga", "Nambo", "Poasia", "Puwatu", "Wawombalata"]
            },
            "Gorontalo": {
                "Gorontalo": ["City", "Dungingi", "Hulonthalangi", "Kota Barat", "Kota Selatan", "Kota Tengah", "Kota Timur", "Kota Utara", "Sipatana"]
            },
            "Sulawesi Barat": {
                "Mamuju": ["Mamuju", "Simboro", "Takandeang", "Kalukku", "Kepulauan"]
            },
            "Maluku": {
                "Ambon": ["Baguala", "Leitimur Selatan", "Nusaniwe", "Sirimau", "Teluk Ambon"],
                "Tual": ["Dullah Selatan", "Dullah Utara", "Pulau Dullah", "Tayando Tam"]
            },
            "Maluku Utara": {
                "Ternate": ["Ternate Selatan", "Ternate Tengah", "Ternate Utara", "Moti", "Pulau Batang Dua", "Pulau Hiri"],
                "Tidore Kepulauan": ["Tidore", "Tidore Selatan", "Tidore Timur", "Tidore Utara", "Oba", "Oba Selatan", "Oba Tengah", "Oba Utara"]
            },
            "Papua Barat": {
                "Sorong": ["Sorong Barat", "Sorong Kota", "Sorong Manoi", "Sorong Timur", "Sorong Utara"],
                "Manokwari": ["Manokwari Barat", "Manokwari Selatan", "Manokwari Timur", "Manokwari Utara"]
            },
            "Papua": {
                "Jayapura": ["Abepura", "Heram", "Muara Tami", "Jayapura Selatan", "Jayapura Utara"]
            }
        };

        // Estimasi ongkir berdasarkan zona (dalam Rupiah)
        const ongkirEstimasi = {
            // Zona 1: Jawa & Bali (Murah)
            "DKI Jakarta": 15000,
            "Jawa Barat": 12000,
            "Jawa Tengah": 13000,
            "DI Yogyakarta": 13000,
            "Jawa Timur": 13000,
            "Banten": 13000,
            "Bali": 19000,
            
            // Zona 2: Sumatera (Sedang)
            "Aceh": 28000,
            "Sumatera Utara": 25000,
            "Sumatera Barat": 25000,
            "Riau": 25000,
            "Kepulauan Riau": 27000,
            "Jambi": 25000,
            "Sumatera Selatan": 25000,
            "Bengkulu": 26000,
            "Lampung": 20000,
            "Bangka Belitung": 28000,
            
            // Zona 3: Kalimantan (Mahal)
            "Kalimantan Barat": 35000,
            "Kalimantan Tengah": 37000,
            "Kalimantan Selatan": 35000,
            "Kalimantan Timur": 35000,
            "Kalimantan Utara": 40000,
            
            // Zona 4: Sulawesi (Mahal)
            "Sulawesi Utara": 35000,
            "Sulawesi Tengah": 37000,
            "Sulawesi Selatan": 35000,
            "Sulawesi Tenggara": 37000,
            "Gorontalo": 37000,
            "Sulawesi Barat": 37000,
            
            // Zona 5: Nusa Tenggara, Maluku, Papua (Sangat Mahal)
            "Nusa Tenggara Barat": 40000,
            "Nusa Tenggara Timur": 45000,
            "Maluku": 50000,
            "Maluku Utara": 50000,
            "Papua Barat": 60000,
            "Papua": 60000
        };

        // Handle variants logic
        document.getElementById('hasVariants').addEventListener('change', function () {
            let checked = this.checked;
            document.getElementById('colors').disabled = !checked;
            document.getElementById('sizes').disabled = !checked;
            document.getElementById('autoGenerateCombinations').disabled = !checked;
            document.getElementById('manualVariantList').disabled = !checked;
        });
        document.getElementById('colors').disabled = true;
        document.getElementById('sizes').disabled = true;
        document.getElementById('autoGenerateCombinations').disabled = true;
        document.getElementById('manualVariantList').disabled = true;

        document.getElementById('generateBtn').addEventListener('click', function () {
            const getVal = id => (document.getElementById(id) ? document.getElementById(id).value.trim() : '');
            const featuresArr = getVal('features').split(',').map(f => f.trim()).filter(Boolean);
            let imagesArr = getVal('productImages').split(/[\n,]/).map(x => x.trim()).filter(Boolean);
            const gifUrl = getVal('productGif');
            if (gifUrl) imagesArr.push(gifUrl);
            const hasVariants = document.getElementById('hasVariants').checked;
            const autoGen = document.getElementById('autoGenerateCombinations').checked;
            let colors = getVal('colors').split(',').map(c => c.trim()).filter(Boolean);
            let sizes = getVal('sizes').split(',').map(c => c.trim()).filter(Boolean);
            let variantList = getVal('manualVariantList');
            let variantCombinations = [];
            if (hasVariants) {
                if (autoGen && colors.length && sizes.length) {
                    colors.forEach(color => {
                        sizes.forEach(size => {
                            variantCombinations.push(`${color.toUpperCase()}-${size.toUpperCase()}`);
                        });
                    });
                } else if (variantList) {
                    variantCombinations = variantList.replace(/\r\n/g, '\n').split('\n').map(x => x.trim()).filter(Boolean);
                }
            }
            if (!getVal('productName') || !getVal('price') || !getVal('description') || !getVal('whatsapp') || !getVal('storeName')) {
                alert("Isi semua data produk & toko dengan benar!");
                return;
            }
            if (imagesArr.length < 1) {
                alert("Minimal 1 gambar produk wajib diisi!");
                return;
            }
            const formData = {
                productName: getVal('productName'),
                price: parseInt(getVal('price')),
                description: getVal('description'),
                whatsapp: getVal('whatsapp').replace(/\D/g, ''),
                images: imagesArr,
                hasVariants,
                colors,
                sizes,
                autoGenerateCombinations: autoGen,
                manualVariantList: variantList,
                variantCombinations,
                storeName: getVal('storeName'),
                storePhone: getVal('storePhone'),
                features: featuresArr
            };
            const html = generateWebsite(formData);
            document.getElementById('result').value = html;
            document.getElementById('resultSection').style.display = 'block';
        });

        document.getElementById('copyBtn').addEventListener('click', function () {
            const result = document.getElementById('result');
            result.select();
            result.setSelectionRange(0, 99999);
            document.execCommand("copy");
            this.textContent = "‚úÖ Disalin!";
            setTimeout(() => { this.textContent = "Salin HTML"; }, 1800);
        });
        document.getElementById('downloadBtn').addEventListener('click', function () {
            const code = document.getElementById('result').value;
            const blob = new Blob([code], { type: "text/html" });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'toko-online.html';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        });

        function generateVariantHTML(formData) {
            if (!formData.hasVariants) return '';
            if (formData.variantCombinations && formData.variantCombinations.length > 0) {
                return `
                <div class="variant-selection">
                    <label>Pilih Varian:</label>
                    <select id="variantSelect" required onchange="updateOrderSummary()">
                        <option value="">-- Pilih Varian --</option>
                        ${formData.variantCombinations.map(variant =>
                            `<option value="${variant}">${variant}</option>`
                        ).join('')}
                    </select>
                </div>`;
            } else {
                let html = `<div class="variant-selection">`;
                if (formData.colors && formData.colors.length > 0) {
                    html += `
                    <div class="form-group">
                        <label>Pilih Warna:</label>
                        <select id="colorSelect" required onchange="updateOrderSummary()">
                            <option value="">-- Pilih Warna --</option>
                            ${formData.colors.map(color => `<option value="${color}">${color}</option>`).join('')}
                        </select>
                    </div>`;
                }
                if (formData.sizes && formData.sizes.length > 0) {
                    html += `
                    <div class="form-group">
                        <label>Pilih Ukuran:</label>
                        <select id="sizeSelect" required onchange="updateOrderSummary()">
                            <option value="">-- Pilih Ukuran --</option>
                            ${formData.sizes.map(size => `<option value="${size}">${size}</option>`).join('')}
                        </select>
                    </div>`;
                }
                html += `</div>`;
                return html;
            }
        }

        function generateWebsite(formData) {
            function esc(str) {
                return (str+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")
                    .replace(/"/g,"&quot;").replace(/'/g,"&#39;");
            }
            const addressDataString = JSON.stringify(indonesiaData);
            const ongkirEstimasiString = JSON.stringify(ongkirEstimasi);
            let featuresHtml = '';
            if (formData.features && formData.features.length) {
                featuresHtml = `<ul class="feature-list">${formData.features.map(f => `<li>‚úîÔ∏è ${esc(f)}</li>`).join('')}</ul>`;
            }
            const paymentLogos = `
                <div class="payment-methods">
                    <h4>Metode Pembayaran:</h4>
                    <div class="payment-options">
                        <div class="payment-option">
                            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='50' height='30' viewBox='0 0 50 30'%3E%3Crect width='50' height='30' rx='4' fill='%232563EB'/%3E%3Ctext x='25' y='18' text-anchor='middle' font-size='8' fill='white' font-weight='bold'%3EBANK%3C/text%3E%3C/svg%3E" alt="Bank Transfer">
                            <span>Transfer Bank</span>
                        </div>
                        <div class="payment-option">
                            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='50' height='30' viewBox='0 0 50 30'%3E%3Crect width='50' height='30' rx='4' fill='%23EC4899'/%3E%3Ctext x='25' y='18' text-anchor='middle' font-size='8' fill='white' font-weight='bold'%3EE-WALLET%3C/text%3E%3C/svg%3E" alt="E-Wallet">
                            <span>E-Wallet</span>
                        </div>
                        <div class="payment-option">
                            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='50' height='30' viewBox='0 0 50 30'%3E%3Crect width='50' height='30' rx='4' fill='%2310B981'/%3E%3Ctext x='25' y='18' text-anchor='middle' font-size='8' fill='white' font-weight='bold'%3ECREDIT%3C/text%3E%3C/svg%3E" alt="Credit Card">
                            <span>Kartu Kredit</span>
                        </div>
                    </div>
                </div>
            `;
            const galleryImgs = formData.images;
            const generatedCss = `
            <style>
                * { margin: 0; padding: 0; box-sizing: border-box; }
                body { 
                    font-family: -apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;
                    background: #f8fafc;
                    color: #222;
                    line-height: 1.6;
                }
                .container { 
                    max-width: 1200px; 
                    margin: 0 auto; 
                    padding: 0 20px; 
                }
                header { 
                    background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
                    color: #fff; 
                    padding: 15px 0;
                    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                }
                .header-content {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                }
                .logo { 
                    font-size: 1.5rem; 
                    font-weight: 800; 
                }
                .contact-info {
                    display: flex;
                    align-items: center;
                    gap: 15px;
                    font-size: 0.95rem;
                }
                .product-section {
                    padding: 40px 0;
                }
                .product-container {
                    display: grid;
                    grid-template-columns: 1fr 1fr;
                    gap: 50px;
                    align-items: start;
                }
                .gallery-section {
                    position: sticky;
                    top: 20px;
                }
                .main-image-container {
                    width: 100%;
                    aspect-ratio: 1;
                    background: #fff;
                    border-radius: 15px;
                    box-shadow: 0 4px 20px rgba(0,0,0,0.1);
                    overflow: hidden;
                    margin-bottom: 20px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                }
                .main-image {
                    width: 100%;
                    height: 100%;
                    object-fit: contain;
                    transition: opacity 0.3s ease;
                }
                .thumbnail-container {
                    display: flex;
                    gap: 10px;
                    overflow-x: auto;
                    padding: 5px 0;
                }
                .thumbnail {
                    width: 80px;
                    height: 80px;
                    object-fit: cover;
                    border-radius: 8px;
                    cursor: pointer;
                    border: 2px solid transparent;
                    transition: border-color 0.2s ease;
                    flex-shrink: 0;
                }
                .thumbnail.active {
                    border-color: #2563eb;
                }
                .product-info {
                    background: #fff;
                    padding: 30px;
                    border-radius: 15px;
                    box-shadow: 0 4px 20px rgba(0,0,0,0.08);
                }
                .product-title {
                    font-size: 1.8rem;
                    font-weight: 700;
                    color: #1f2937;
                    margin-bottom: 10px;
                }
                .product-price {
                    font-size: 1.5rem;
                    font-weight: 800;
                    color: #2563eb;
                    margin-bottom: 20px;
                }
                .product-description {
                    color: #6b7280;
                    margin-bottom: 20px;
                    line-height: 1.7;
                }
                .feature-list {
                    list-style: none;
                    margin-bottom: 25px;
                }
                .feature-list li {
                    padding: 5px 0;
                    color: #059669;
                    font-weight: 500;
                }
                .order-form {
                    border-top: 2px solid #f3f4f6;
                    padding-top: 25px;
                }
                .form-section {
                    margin-bottom: 25px;
                }
                .form-section h3 {
                    font-size: 1.2rem;
                    color: #1f2937;
                    margin-bottom: 15px;
                    font-weight: 600;
                }
                .form-group {
                    margin-bottom: 15px;
                }
                .form-group label {
                    display: block;
                    margin-bottom: 5px;
                    font-weight: 600;
                    color: #374151;
                }
                .form-control {
                    width: 100%;
                    padding: 12px 15px;
                    border: 2px solid #e5e7eb;
                    border-radius: 8px;
                    font-size: 1rem;
                    transition: border-color 0.2s ease;
                    background: #fff;
                }
                .form-control:focus {
                    outline: none;
                    border-color: #2563eb;
                    box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
                }
                .quantity-controls {
                    display: flex;
                    align-items: center;
                    gap: 15px;
                    margin: 15px 0;
                }
                .qty-btn {
                    width: 40px;
                    height: 40px;
                    border: none;
                    background: #2563eb;
                    color: white;
                    border-radius: 50%;
                    font-size: 1.2rem;
                    font-weight: bold;
                    cursor: pointer;
                    transition: background 0.2s ease;
                }
                .qty-btn:hover {
                    background: #1d4ed8;
                }
                .qty-input {
                    width: 80px;
                    text-align: center;
                    font-weight: bold;
                    border: 2px solid #d1d5db;
                }
                .payment-section {
                    background: #f8fafc;
                    padding: 20px;
                    border-radius: 10px;
                    margin: 20px 0;
                }
                .checkout-summary {
                    background: #f1f5f9;
                    padding: 20px;
                    border-radius: 10px;
                    margin: 20px 0;
                    border-left: 4px solid #2563eb;
                }
                .summary-row {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    padding: 8px 0;
                    border-bottom: 1px solid #e2e8f0;
                }
                .summary-row:last-child {
                    border-bottom: none;
                    font-weight: bold;
                    font-size: 1.1rem;
                    color: #1f2937;
                    margin-top: 10px;
                    padding-top: 15px;
                    border-top: 2px solid #2563eb;
                }
                .ongkir-info {
                    font-size: 0.9rem;
                    color: #6b7280;
                    margin-top: 5px;
                }
                .whatsapp-btn {
                    width: 100%;
                    background: linear-gradient(135deg, #25d366 0%, #1da851 100%);
                    color: white;
                    border: none;
                    padding: 15px 20px;
                    border-radius: 10px;
                    font-size: 1.1rem;
                    font-weight: 700;
                    cursor: pointer;
                    transition: transform 0.2s ease;
                    margin-top: 20px;
                }
                .whatsapp-btn:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 5px 15px rgba(37, 211, 102, 0.3);
                }
                .payment-methods {
                    margin: 20px 0;
                    text-align: center;
                }
                .payment-options {
                    display: flex;
                    justify-content: center;
                    gap: 20px;
                    margin-top: 10px;
                }
                .payment-option {
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    gap: 5px;
                }
                .payment-option img {
                    border-radius: 5px;
                }
                .payment-option span {
                    font-size: 0.85rem;
                    color: #6b7280;
                }
                .form-grid {
                    display: grid;
                    grid-template-columns: 1fr 1fr;
                    gap: 15px;
                }
                .address-note {
                    background: #fef3c7;
                    border: 1px solid #f59e0b;
                    padding: 12px 15px;
                    border-radius: 8px;
                    margin: 10px 0;
                    font-size: 0.9rem;
                    color: #92400e;
                }
                .required {
                    color: #dc2626;
                }
                @media (max-width: 768px) {
                    .product-container {
                        grid-template-columns: 1fr;
                        gap: 30px;
                    }
                    .gallery-section {
                        position: static;
                    }
                    .form-grid {
                        grid-template-columns: 1fr;
                    }
                    .product-info {
                        padding: 20px;
                    }
                    .container {
                        padding: 0 15px;
                    }
                }
            </style>`;

            const generatedJs = `
            <script>
                const indonesiaData = ${addressDataString};
                const ongkirEstimasi = ${ongkirEstimasiString};
                const PRODUCT_PRICE = ${formData.price};
                const productName = "${esc(formData.productName)}";
                const whatsappNumber = "${esc(formData.whatsapp)}";
                let galleryImages = ${JSON.stringify(galleryImgs)};
                let currentImageIndex = 0;
                
                // Gallery functions
                function showImage(index) {
                    currentImageIndex = index;
                    document.getElementById('mainImage').src = galleryImages[index];
                    
                    // Update thumbnail active state
                    document.querySelectorAll('.thumbnail').forEach((thumb, i) => {
                        thumb.classList.toggle('active', i === index);
                    });
                }
                
                // Quantity functions
                function changeQuantity(delta) {
                    const qtyInput = document.getElementById('quantity');
                    let newQty = parseInt(qtyInput.value) + delta;
                    if (newQty < 1) newQty = 1;
                    if (newQty > 99) newQty = 99;
                    qtyInput.value = newQty;
                    updateSummary();
                }
                
                // Address functions
                function loadCities() {
                    const province = document.getElementById('province').value;
                    const citySelect = document.getElementById('city');
                    const districtSelect = document.getElementById('district');
                    
                    // Reset city and district
                    citySelect.innerHTML = '<option value="">Pilih Kota/Kabupaten</option>';
                    districtSelect.innerHTML = '<option value="">Pilih Kecamatan</option>';
                    
                    if (province && indonesiaData[province]) {
                        Object.keys(indonesiaData[province]).forEach(city => {
                            citySelect.innerHTML += \`<option value="\${city}">\${city}</option>\`;
                        });
                        citySelect.disabled = false;
                    } else {
                        citySelect.disabled = true;
                    }
                    
                    districtSelect.disabled = true;
                    updateSummary();
                }
                
                function loadDistricts() {
                    const province = document.getElementById('province').value;
                    const city = document.getElementById('city').value;
                    const districtSelect = document.getElementById('district');
                    
                    districtSelect.innerHTML = '<option value="">Pilih Kecamatan</option>';
                    
                    if (province && city && indonesiaData[province] && indonesiaData[province][city]) {
                        indonesiaData[province][city].forEach(district => {
                            districtSelect.innerHTML += \`<option value="\${district}">\${district}</option>\`;
                        });
                        districtSelect.disabled = false;
                    } else {
                        districtSelect.disabled = true;
                    }
                    
                    updateSummary();
                }
                
                // Summary calculation
                function updateSummary() {
                    const quantity = parseInt(document.getElementById('quantity').value) || 1;
                    const province = document.getElementById('province').value;
                    
                    const subtotal = PRODUCT_PRICE * quantity;
                    let ongkir = 0;
                    let ongkirText = 'Pilih provinsi terlebih dahulu';
                    
                    if (province && ongkirEstimasi[province]) {
                        ongkir = ongkirEstimasi[province];
                        ongkirText = \`Rp \${ongkir.toLocaleString('id-ID')}\`;
                    }
                    
                    // Generate unique code (3 digits)
                    let uniqueCode = window.currentUniqueCode;
                    if (!uniqueCode) {
                        uniqueCode = Math.floor(Math.random() * 900) + 100;
                        window.currentUniqueCode = uniqueCode;
                    }
                    
                    const total = subtotal + ongkir + uniqueCode;
                    
                    // Update display
                    document.getElementById('summaryQty').textContent = \`\${quantity} pcs\`;
                    document.getElementById('summarySubtotal').textContent = \`Rp \${subtotal.toLocaleString('id-ID')}\`;
                    document.getElementById('summaryOngkir').textContent = ongkirText;
                    document.getElementById('summaryUniqueCode').textContent = \`+Rp \${uniqueCode}\`;
                    document.getElementById('summaryTotal').textContent = \`Rp \${total.toLocaleString('id-ID')}\`;
                }
                
                // Form submission
                function submitOrder() {
                    // Validate required fields
                    const requiredFields = ['customerName', 'customerPhone', 'customerAddress', 'province', 'city', 'district'];
                    let isValid = true;
                    
                    requiredFields.forEach(fieldId => {
                        const field = document.getElementById(fieldId);
                        if (!field.value.trim()) {
                            field.style.borderColor = '#dc2626';
                            isValid = false;
                        } else {
                            field.style.borderColor = '#e5e7eb';
                        }
                    });
                    
                    // Validate variant selection if applicable
                    const variantSelect = document.getElementById('variantSelect');
                    const colorSelect = document.getElementById('colorSelect');
                    const sizeSelect = document.getElementById('sizeSelect');
                    
                    let selectedVariant = '';
                    if (variantSelect && variantSelect.value) {
                        selectedVariant = variantSelect.value;
                    } else if (colorSelect || sizeSelect) {
                        const color = colorSelect ? colorSelect.value : '';
                        const size = sizeSelect ? sizeSelect.value : '';
                        if (color || size) {
                            selectedVariant = [color, size].filter(v => v).join(' - ');
                        }
                        if ((colorSelect && !color) || (sizeSelect && !size)) {
                            alert('Mohon pilih varian produk yang tersedia');
                            return;
                        }
                    }
                    
                    if (!isValid) {
                        alert('Mohon lengkapi semua data yang diperlukan');
                        return;
                    }
                    
                    // Collect form data
                    const customerName = document.getElementById('customerName').value.trim();
                    const customerPhone = document.getElementById('customerPhone').value.trim();
                    const customerAddress = document.getElementById('customerAddress').value.trim();
                    const province = document.getElementById('province').value;
                    const city = document.getElementById('city').value;
                    const district = document.getElementById('district').value;
                    const notes = document.getElementById('notes').value.trim();
                    const quantity = parseInt(document.getElementById('quantity').value);
                    
                    // Calculate totals
                    const subtotal = PRODUCT_PRICE * quantity;
                    const ongkir = ongkirEstimasi[province] || 0;
                    const uniqueCode = window.currentUniqueCode || 123;
                    const total = subtotal + ongkir + uniqueCode;
                    
                    // Create WhatsApp message
                    let message = \`üõí *PESANAN BARU*\\n\\n\`;
                    message += \`üì¶ *DETAIL PRODUK:*\\n\`;
                    message += \`‚Ä¢ Produk: \${productName}\\n\`;
                    if (selectedVariant) {
                        message += \`‚Ä¢ Varian: \${selectedVariant}\\n\`;
                    }
                    message += \`‚Ä¢ Harga: Rp \${PRODUCT_PRICE.toLocaleString('id-ID')}\\n\`;
                    message += \`‚Ä¢ Jumlah: \${quantity} pcs\\n\`;
                    message += \`‚Ä¢ Subtotal: Rp \${subtotal.toLocaleString('id-ID')}\\n\\n\`;
                    
                    message += \`üöö *PENGIRIMAN:*\\n\`;
                    message += \`‚Ä¢ Ongkir: Rp \${ongkir.toLocaleString('id-ID')}\\n\`;
                    message += \`‚Ä¢ Kode Unik: +Rp \${uniqueCode}\\n\`;
                    message += \`‚Ä¢ *TOTAL: Rp \${total.toLocaleString('id-ID')}*\\n\\n\`;
                    
                    message += \`üë§ *DATA PENERIMA:*\\n\`;
                    message += \`‚Ä¢ Nama: \${customerName}\\n\`;
                    message += \`‚Ä¢ HP/WA: \${customerPhone}\\n\`;
                    message += \`‚Ä¢ Alamat: \${customerAddress}\\n\`;
                    message += \`‚Ä¢ Kecamatan: \${district}\\n\`;
                    message += \`‚Ä¢ Kota: \${city}\\n\`;
                    message += \`‚Ä¢ Provinsi: \${province}\\n\`;
                    
                    if (notes) {
                        message += \`\\nüìù *CATATAN:*\\n\${notes}\\n\`;
                    }
                    
                    message += \`\\nüí≥ *PEMBAYARAN:* Transfer Bank\\n\`;
                    message += \`\\nMohon konfirmasi pesanan ini. Terima kasih! üôè\`;
                    
                    // Open WhatsApp
                    const encodedMessage = encodeURIComponent(message);
                    const whatsappUrl = \`https://wa.me/\${whatsappNumber}?text=\${encodedMessage}\`;
                    window.open(whatsappUrl, '_blank');
                }
                
                // Initialize page
                window.addEventListener('DOMContentLoaded', function() {
                    // Setup gallery
                    showImage(0);
                    
                    // Setup province options
                    const provinceSelect = document.getElementById('province');
                    Object.keys(indonesiaData).sort().forEach(province => {
                        provinceSelect.innerHTML += \`<option value="\${province}">\${province}</option>\`;
                    });
                    
                    // Initial summary update
                    updateSummary();
                    
                    // Add event listeners
                    document.getElementById('quantity').addEventListener('input', updateSummary);
                });
            <\/script>`;

            const galleryHtml = `
                <div class="gallery-section">
                    <div class="main-image-container">
                        <img id="mainImage" src="${esc(galleryImgs[0])}" alt="${esc(formData.productName)}" class="main-image">
                    </div>
                    <div class="thumbnail-container">
                        ${galleryImgs.map((src, index) => 
                            `<img src="${esc(src)}" alt="Gambar ${index + 1}" class="thumbnail ${index === 0 ? 'active' : ''}" onclick="showImage(${index})">`
                        ).join('')}
                    </div>
                </div>
            `;

            return `<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${esc(formData.productName)} - ${esc(formData.storeName)}</title>
    <meta name="description" content="${esc(formData.description)}">
    ${generatedCss}
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">${esc(formData.storeName)}</div>
                <div class="contact-info">
                    <span>üì± ${esc(formData.whatsapp)}</span>
                    ${formData.storePhone ? `<span>‚òéÔ∏è ${esc(formData.storePhone)}</span>` : ''}
                </div>
            </div>
        </div>
    </header>

    <main class="product-section">
        <div class="container">
            <div class="product-container">
                ${galleryHtml}
                
                <div class="product-info">
                    <h1 class="product-title">${esc(formData.productName)}</h1>
                    <div class="product-price">Rp ${formData.price.toLocaleString('id-ID')}</div>
                    <p class="product-description">${esc(formData.description)}</p>
                    
                    ${featuresHtml}
                    
                    <form class="order-form" onsubmit="return false;">
                        ${generateVariantHTML(formData)}
                        
                        <div class="form-section">
                            <h3>Jumlah Pesanan</h3>
                            <div class="quantity-controls">
                                <button type="button" class="qty-btn" onclick="changeQuantity(-1)">‚àí</button>
                                <input type="number" id="quantity" value="1" min="1" max="99" class="qty-input form-control">
                                <button type="button" class="qty-btn" onclick="changeQuantity(1)">+</button>
                            </div>
                        </div>
                        
                        <div class="form-section">
                            <h3>Data Pemesan <span class="required">*</span></h3>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="customerName">Nama Lengkap <span class="required">*</span></label>
                                    <input type="text" id="customerName" class="form-control" required>
                                </div>
                                <div class="form-group">
                                    <label for="customerPhone">No. WhatsApp <span class="required">*</span></label>
                                    <input type="tel" id="customerPhone" class="form-control" placeholder="08xxxxxxxxxx" required>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-section">
                            <h3>Alamat Pengiriman <span class="required">*</span></h3>
                            <div class="form-group">
                                <label for="customerAddress">Alamat Lengkap <span class="required">*</span></label>
                                <textarea id="customerAddress" class="form-control" rows="3" placeholder="Jalan, RT/RW, No. Rumah, Patokan" required></textarea>
                            </div>
                            
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="province">Provinsi <span class="required">*</span></label>
                                    <select id="province" class="form-control" onchange="loadCities()" required>
                                        <option value="">Pilih Provinsi</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="city">Kota/Kabupaten <span class="required">*</span></label>
                                    <select id="city" class="form-control" onchange="loadDistricts()" disabled required>
                                        <option value="">Pilih Kota/Kabupaten</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="district">Kecamatan <span class="required">*</span></label>
                                <select id="district" class="form-control" disabled required>
                                    <option value="">Pilih Kecamatan</option>
                                </select>
                            </div>
                            
                            <div class="address-note">
                                üí° <strong>Tips:</strong> Pastikan alamat lengkap dan nomor WhatsApp aktif untuk memudahkan pengiriman
                            </div>
                        </div>
                        
                        <div class="form-section">
                            <h3>Catatan Tambahan</h3>
                            <div class="form-group">
                                <label for="notes">Catatan untuk penjual (opsional)</label>
                                <textarea id="notes" class="form-control" rows="2" placeholder="Contoh: Kirim sore hari, warna cadangan biru, dll"></textarea>
                            </div>
                        </div>
                        
                        <div class="checkout-summary">
                            <h3>Ringkasan Pesanan</h3>
                            <div class="summary-row">
                                <span>Jumlah:</span>
                                <span id="summaryQty">1 pcs</span>
                            </div>
                            <div class="summary-row">
                                <span>Subtotal:</span>
                                <span id="summarySubtotal">Rp ${formData.price.toLocaleString('id-ID')}</span>
                            </div>
                            <div class="summary-row">
                                <span>Ongkos Kirim:</span>
                                <span id="summaryOngkir">-</span>
                            </div>
                            <div class="ongkir-info">
                                ‚ö° Estimasi ongkir otomatis berdasarkan provinsi
                            </div>
                            <div class="summary-row">
                                <span>Kode Unik:</span>
                                <span id="summaryUniqueCode">+Rp 123</span>
                            </div>
                            <div class="summary-row">
                                <span><strong>TOTAL PEMBAYARAN:</strong></span>
                                <span id="summaryTotal"><strong>Rp ${formData.price.toLocaleString('id-ID')}</strong></span>
                            </div>
                        </div>
                        
                        ${paymentLogos}
                        
                        <button type="button" class="whatsapp-btn" onclick="submitOrder()">
                            üì± Pesan Sekarang via WhatsApp
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </main>
    
    <footer style="text-align: center; padding: 30px 0; color: #6b7280; background: #f9fafb;">
        <div class="container">
            <p>&copy; 2025 ${esc(formData.storeName)}. Powered by <strong>nexcoAI</strong></p>
        </div>
    </footer>
    
    ${generatedJs}
</body>
</html>`;
        }
    </script>
</body>
</html>
